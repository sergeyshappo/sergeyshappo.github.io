(()=>{"use strict";var e,t={961:(e,t,n)=>{!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=n(2551)},6540:(e,t,n)=>{e.exports=n(5287)},3968:function(e,t,n){var o=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var o,r=0,a=t.length;r<a;r++)!o&&r in t||(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.MapApp=void 0;var a=r(n(6540)),l=n(2745),c=n(5214);n(1780),n(4753);var i=n(3481),u=r(n(9875));n(2407),n(6203);var s=n(9937),f=function(e){var t=e.children,n=e.toShow,o=e.setOpenSlider,r=(0,l.useMap)(),c=a.default.useState(),u=c[0],s=c[1];return a.default.useEffect((function(){u&&n?u.show():u&&u.hide()}),[n]),a.default.useEffect((function(){var e=i.control.sidebar("sidebar",{position:"left",autoPan:!0});return e.on("hidden",(function(){return o(!1)})),r.addControl(e),s(e),function(){}}),[]),a.default.createElement("div",{id:"sidebar"},t)},d=function(e){var t=e.bounds,n=e.callback,o=(0,l.useMap)();a.default.useEffect((function(){t&&o.fitBounds(t)}),[t]);var r=function(e){n&&n(e,o)};return a.default.useEffect((function(){return o.on("baselayerchange",r),function(){o.off("baselayerchange",r)}}),[]),a.default.createElement(a.default.Fragment,null)};t.MapApp=function(e){var t,n=e.sourceUrlProps,r=a.default.useState(!1),p=r[0],h=r[1],v=a.default.useState({}),g=v[0],m=v[1],y=a.default.useState(""),w=y[0],L=y[1],E=a.default.useState(),b=E[0],_=E[1],O=a.default.useState([]),S=O[0],M=O[1],k=a.default.useState([]),x=k[0],C=k[1],T=a.default.useState([]),I=T[0],z=T[1],j=a.default.useState([]),P=j[0],A=j[1];return a.default.useEffect((function(){var e="";n&&(e="https://raw.githubusercontent.com/".concat(n));var t=new URL(location.href).searchParams,o=t.get("url"),r=t.get("id");r&&L(r),o&&(e="https://raw.githubusercontent.com/".concat(o)),fetch(e).then((function(e){return e.json()})).then((function(e){var t=e.polygons,n=e.houses,o={};n.forEach((function(e){var t=e.village;o[t]=t})),M(t),C(n);var a=Object.keys(o);z(a),!r&&L(a[0])}))}),[]),a.default.useEffect((function(){var e=0,t=0,n=0,r=0;x&&x.length&&o([],x,!0).forEach((function(o){var a=o.coords,l=o.village;if(a&&l===w){var c=JSON.parse(a),i=c[0],u=c[1];i&&((i>e||!e)&&(e=i),(i<n||!n)&&(n=i)),u&&((u>t||!t)&&(t=u),(u<r||!r)&&(r=u))}})),_([[e,t],[n,r]])}),[x,S,w]),a.default.useEffect((function(){var e=x.map((function(e,t){var n=e.title,o=e.description,r=e.coords,c=e.village,u=e.iconColor,f=e.iconType;if(r&&c===w){var d=JSON.parse(r),p=d[0],v=d[1];return a.default.createElement(l.Marker,{key:t,position:[p,v],icon:(0,i.divIcon)({html:(0,s.getIcon)(f)({iconColor:u}),className:"marker-div-icon"}),eventHandlers:{click:function(){}}},!o&&a.default.createElement(l.Tooltip,null,n),o&&a.default.createElement(l.Popup,null,a.default.createElement("b",null,n),a.default.createElement("p",null,a.default.createElement("span",{className:"popup-readmore-link",onClick:function(){m({title:n,description:o}),h(!0)}},"Подробнее"))))}}));A(e)}),[x,w]),a.default.createElement(a.default.Fragment,null,!p&&a.default.createElement("div",{id:"filter-button",onClick:function(){return h(!p)}}),a.default.createElement(l.MapContainer,{attributionControl:!1,id:"map",center:[53.902287,27.561824],zoom:11,trackResize:!0,scrollWheelZoom:!0,style:{height:"100vh"}},a.default.createElement(d,{bounds:b,callback:function(e){L(e.name)}}),a.default.createElement(l.TileLayer,{url:"http://{s}.google.com/vt/lyrs=s,h&x={x}&y={y}&z={z}",subdomains:["mt0","mt1","mt2","mt3"],maxZoom:20}),a.default.createElement(l.LayersControl,{hideSingleBase:!0,position:"topright",collapsed:!1},I.filter((function(e){return!(n&&"localhost"!==location.hostname&&(new Date).getFullYear()<2026&&e!==w)})).map((function(e,t){return a.default.createElement(l.LayersControl.BaseLayer,{key:t,checked:0===t,name:e},a.default.createElement(l.FeatureGroup,null,a.default.createElement(u.default,{chunkedLoading:!0,spiderfyOnMaxZoom:!0,showCoverageOnHover:!0,zoomToBoundsOnClick:!0,animate:!0,maxClusterRadius:20,removeOutsideVisibleBounds:!0},P),S.map((function(t,n){var o=t.title,r=t.description,c=t.coords,i=t.village,u=t.iconColor;if(c&&i===e)return a.default.createElement(l.Polygon,{key:n,positions:JSON.parse(c),color:u,pathOptions:{opacity:.1}},a.default.createElement(l.Tooltip,null,o),r&&a.default.createElement(l.Popup,null,a.default.createElement("div",{dangerouslySetInnerHTML:{__html:r}})))}))))}))),a.default.createElement(l.FeatureGroup,null,a.default.createElement(c.EditControl,{position:"topleft",onCreated:function(e){var t;if("polygon"===e.layerType&&(console.log("getLatLngs",e.layer.getLatLngs()),t=e.layer.getLatLngs()[0].map((function(e){return Object.values(e)})),console.log("dataToSave",t)),"marker"===e.layerType){console.log("getLatLng",e.layer.getLatLng());var n=e.layer.getLatLng();t=[n.lat,n.lng],console.log("dataToSave",t)}try{!function(){try{return window.self!==window.top}catch(e){return!0}}()?navigator.clipboard.writeText(JSON.stringify(t)):window.top.postMessage(t,"*")}catch(e){console.error("Failed to copy: ",e)}},draw:{polyline:!1,polygon:!0,rectangle:!1,circle:!1,marker:!0,circlemarker:!1}})),a.default.createElement(f,{toShow:p,setOpenSlider:h},a.default.createElement("h3",null,g.title),null===(t=null==g?void 0:g.description)||void 0===t?void 0:t.split("\n\n").map((function(e,t){return a.default.createElement("p",{key:t,dangerouslySetInnerHTML:{__html:null==e?void 0:e.split("\n").join("<br>")}})})))))}},9937:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getIcon=t.schoolIcon=t.houseIcon=t.circleIcon=t.pinIcon=void 0,t.pinIcon=function(){return'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24">\n        <path d="M17 7V5H5v12h2V8.414l10.293 10.293 1.414-1.414L8.414 7H17z" fill="red"/>\n    </svg>'},t.circleIcon=function(e){var t=e.iconColor;return'<svg  xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="15" height="15" viewBox="0 0 24 24">\n        <circle cx="12" cy="12" r="5" fill="'.concat(t||"red",'" />\n    </svg>')},t.houseIcon=function(e){var t=e.iconColor;return'<svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="15" height="15" viewBox="0 0 24 24">\n        <path d="M 12 3.90625 L 11.75 4.0625 L 0.25 11.0625 L 0.75 11.9375 L 12 5.09375 L 23.25 11.9375 L 23.75 11.0625 L 20 8.78125 L 20 4 L 18 4 L 18 7.5625 L 12.25 4.0625 Z M 12 6.5 L 2 12.5 L 2 24 L 22 24 L 22 12.5 Z M 9 13 L 15 13 L 15 22 L 9 22 Z" fill="'.concat(t||"red",'"></path>\n    </svg>')},t.schoolIcon=function(e){var t=e.iconColor;return'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 300 300" width="20" height="20">\n        <path fill="'.concat(t||"red",'" d="M247.007 75.015a5.18 5.18 0 0 0-2.506-6.881l-29.979-13.979a5.175 5.175 0 0 0-6.881 2.505l-15.506 33.253-7.58-22.266a5.18 5.18 0 0 0-4.903-3.51H77.857a5.18 5.18 0 0 0-4.015 1.908L53.67 90.814a5.181 5.181 0 0 0-.886 4.938l50.065 147.069a5.177 5.177 0 0 0 4.9 3.509h109.384a5.179 5.179 0 1 0 0-10.356H111.457L64.917 99.262l24.411.005h.001a5.18 5.18 0 0 0 4.363-2.389 5.179 5.179 0 0 0 .334-4.963L85.96 74.491h89.987l9.866 28.98-34.446 73.872a5.157 5.157 0 0 0-.454 2.708l-.006.002 3.257 32.149a5.179 5.179 0 0 0 2.963 4.172 5.18 5.18 0 0 0 5.099-.413l26.722-18.17v-.002a5.15 5.15 0 0 0 1.781-2.091l15.307-32.823 27.214 79.944a5.182 5.182 0 0 0 6.569 3.233 5.179 5.179 0 0 0 3.233-6.571l-30.693-90.164 34.648-74.302zM68.576 88.907l8.063-9.9 4.585 9.903-12.648-.003zm146.263-23.18 20.594 9.604-4.733 10.151-20.597-9.603 4.736-10.152zm-52.711 122.347 13.464 6.278-12.002 8.16-1.462-14.438zm21.405-1.444-20.594-9.604 42.79-91.763 20.593 9.604-42.789 91.763z"/>\n        <path fill="').concat(t||"red",'" d="m204.084 103.424-20.928 44.88a5.178 5.178 0 1 0 9.385 4.376l20.927-44.879a5.175 5.175 0 0 0-2.503-6.881 5.179 5.179 0 0 0-6.881 2.504zM183.379 160.077a5.178 5.178 0 0 0-6.881 2.504l-.706 1.514a5.18 5.18 0 0 0 4.69 7.367 5.181 5.181 0 0 0 4.697-2.992l.705-1.512a5.178 5.178 0 0 0-2.505-6.881zM92.145 109.681a5.178 5.178 0 1 0 0 10.356h.86a5.176 5.176 0 0 0 5.177-5.178 5.177 5.177 0 0 0-5.177-5.178h-.86zM161.201 120.036a5.178 5.178 0 1 0 0-10.356h-52.449a5.178 5.178 0 0 0 0 10.356h52.449zM154.821 155.233a5.178 5.178 0 0 0-5.178-5.178h-43.754a5.177 5.177 0 0 0-5.177 5.178 5.177 5.177 0 0 0 5.177 5.178h43.754a5.178 5.178 0 0 0 5.178-5.178zM119.633 190.429a5.178 5.178 0 1 0 0 10.356h20.944a5.177 5.177 0 0 0 0-10.356h-20.944z"/>\n</svg>')},t.getIcon=function(e){switch(e){case"house":return t.houseIcon;case"school":return t.schoolIcon;default:return t.circleIcon}}},5722:function(e,t,n){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(5338)),a=o(n(6540)),l=n(3968);r.default.createRoot(document.getElementById("root")).render(a.default.createElement(l.MapApp,null))}},n={};function o(e){var r=n[e];if(void 0!==r)return r.exports;var a=n[e]={id:e,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.exports}o.m=t,e=[],o.O=(t,n,r,a)=>{if(!n){var l=1/0;for(s=0;s<e.length;s++){for(var[n,r,a]=e[s],c=!0,i=0;i<n.length;i++)(!1&a||l>=a)&&Object.keys(o.O).every((e=>o.O[e](n[i])))?n.splice(i--,1):(c=!1,a<l&&(l=a));if(c){e.splice(s--,1);var u=r();void 0!==u&&(t=u)}}return t}a=a||0;for(var s=e.length;s>0&&e[s-1][2]>a;s--)e[s]=e[s-1];e[s]=[n,r,a]},o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;o.g.importScripts&&(e=o.g.location+"");var t=o.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");if(n.length)for(var r=n.length-1;r>-1&&(!e||!/^http(s?):/.test(e));)e=n[r--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),o.p=e})(),(()=>{o.b=document.baseURI||self.location.href;var e={163:0};o.O.j=t=>0===e[t];var t=(t,n)=>{var r,a,[l,c,i]=n,u=0;if(l.some((t=>0!==e[t]))){for(r in c)o.o(c,r)&&(o.m[r]=c[r]);if(i)var s=i(o)}for(t&&t(n);u<l.length;u++)a=l[u],o.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return o.O(s)},n=self.webpackChunkblog=self.webpackChunkblog||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),o.nc=void 0;var r=o.O(void 0,[500],(()=>o(5722)));r=o.O(r)})();